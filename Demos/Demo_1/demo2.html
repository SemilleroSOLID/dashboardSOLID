
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>diagrama de relación de visjs: haga doble clic para contraer y expandir los nodos secundarios (ocultar y mostrar los nodos secundarios)</title>
</head>

<body>
<div id="mynetwork" style="width: 100%;height: 100%;border: 1px solid lightgray;margin:0 auto;" >0</div>
</body>

<script type="text/javascript" src="http://visjs.org/dist/vis.js"></script>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.js"></script>
<link href="http://visjs.org/dist/vis.min.css" rel="stylesheet" type="text/css"/>

<script type="text/javascript" src="js/CopyNetwork.js"></script>

<script>

    var container = document.getElementById('mynetwork');
    var network = null;
    var newNodeArr = [];
    var options;
    var nodesArr = [];
    var edgesArr = [];
    var nodes_data;
    var edges_data;
    var connectedNum = 'Número de nodos secundarios:';

    $(function (){

// $ ('# mynetwork'). bind ("contextmenu", function (e) {return false;}); // clic derecho
        // Muy receptivo
        clientHeight = document.documentElement.clientHeight;
        clientWidth = document.documentElement.clientWidth;
        $('#mynetwork').css('height',clientHeight-70);
        $('#mynetwork').css('width',clientWidth-180);

        var _mydata = {
            "nodes":[
                {"id":0,"assistId":0,"label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":0,"hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-674","y":"-716","hidden":false},
                {"id":1,"assistId":1,"name":"la red","label":"la red","image":"http://visjs.org/examples/network/img/refresh-cl/System-Firewall-2-icon.png","shape":"image","pid":1,"hostType":"2","size":22,"isOurDraw":"false","x":"-86","y":"-287","hidden":false},
                {"id":"1_0","assistId":"1_0","name":"la red","label":"la red","image":"http://visjs.org/examples/network/img/refresh-cl/System-Firewall-2-icon.png","shape":"image","pid":null,"hostType":"2","hostStatus":"1","size":22,"isOurDraw":"false","x":"-75","y":"51","hidden":false},
                {"id":"1_0_0","assistId":"1_0_0","name":"la red","label":"la red","image":"http://visjs.org/examples/network/img/refresh-cl/System-Firewall-2-icon.png","shape":"image","pid":"1_0","hostType":"2","hostStatus":"1","size":22,"isOurDraw":"false","x":"-54","y":"455","hidden":false},
                {"id":"1_0_0_0","assistId":"1_0_0_0","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"94","y":"340","hidden":false},
                {"id":"1_0_0_1","assistId":"1_0_0_1","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-133","y":"641","hidden":false},
                {"id":"1_0_0_2","assistId":"1_0_0_2","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-167","y":"439","hidden":false},
                {"id":"1_0_0_3","assistId":"1_0_0_3","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"170","y":"447","hidden":false},
                {"id":"1_0_0_4","assistId":"1_0_0_4","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"66","y":"435","hidden":false},
                {"id":"1_0_0_5","assistId":"1_0_0_5","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-224","y":"576","hidden":false},
                {"id":"1_0_0_6","assistId":"1_0_0_6","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-143","y":"540","hidden":false},
                {"id":"1_0_0_7","assistId":"1_0_0_7","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-233","y":"374","hidden":false},
                {"id":"1_0_0_8","assistId":"1_0_0_8","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-120","y":"348","hidden":false},
                {"id":"1_0_0_9","assistId":"1_0_0_9","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-249","y":"476","hidden":false},
                {"id":"1_0_0_10","assistId":"1_0_0_10","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"43","y":"532","hidden":false},
                {"id":"1_0_0_11","assistId":"1_0_0_11","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-30","y":"662","hidden":false},
                {"id":"1_0_0_12","assistId":"1_0_0_12","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"134","y":"533","hidden":false},
                {"id":"1_0_0_13","assistId":"1_0_0_13","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-49","y":"576","hidden":false},
                {"id":"1_0_0_14","assistId":"1_0_0_14","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-6","y":"333","hidden":false},
                {"id":"1_0_0_15","assistId":"1_0_0_15","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"67","y":"622","hidden":false},
                {"id":"1_0_1","assistId":"1_0_1","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-24","y":"-123","hidden":false},
                {"id":"1_0_2","assistId":"1_0_2","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-191","y":"92","hidden":false},
                {"id":"1_0_3","assistId":"1_0_3","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-227","y":"156","hidden":false},
                {"id":"1_0_4","assistId":"1_0_4","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-280","y":"75","hidden":false},
                {"id":"1_0_5","assistId":"1_0_5","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"129","y":"64","hidden":false},
                {"id":"1_0_6","assistId":"1_0_6","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-169","y":"-25","hidden":false},
                {"id":"1_0_7","assistId":"1_0_7","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-133","y":"160","hidden":false},
                {"id":"1_0_8","assistId":"1_0_8","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-183","y":"-108","hidden":false},
                {"id":"1_0_9","assistId":"1_0_9","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"66","y":"137","hidden":false},
                {"id":"1_0_10","assistId":"1_0_10","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"101","y":"-35","hidden":false},
                {"id":"1_0_11","assistId":"1_0_11","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"4","y":"-33","hidden":false},
                {"id":"1_0_12","assistId":"1_0_12","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-33","y":"154","hidden":false},
                {"id":"1_0_13","assistId":"1_0_13","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"39","y":"47","hidden":false},
                {"id":"1_0_14","assistId":"1_0_14","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-126","y":"-127","hidden":false},
                {"id":"1_0_15","assistId":"1_0_15","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":"1_0","hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-256","y":"-30","hidden":false},
                {"id":"1_1","assistId":"1_1","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":null,"hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"93","y":"-399","hidden":false},
                {"id":"1_2","assistId":"1_2","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":null,"hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-267","y":"-365","hidden":false},
                {"id":"1_3","assistId":"1_3","label":"equipo","image":"http://visjs.org/examples/network/img/refresh-cl/Hardware-Laptop-1-icon.png","shape":"image","pid":null,"hostType":"1","hostStatus":"1","size":15,"isOurDraw":"false","x":"-99","y":"-483","hidden":false}
            ],
            "edges":[
                {"id":"1_0","from":1,"to":"1_0","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0","from":"1_0","to":"1_0_0","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_0","from":"1_0_0","to":"1_0_0_0","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_1","from":"1_0_0","to":"1_0_0_1","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_2","from":"1_0_0","to":"1_0_0_2","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_3","from":"1_0_0","to":"1_0_0_3","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_4","from":"1_0_0","to":"1_0_0_4","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_5","from":"1_0_0","to":"1_0_0_5","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_6","from":"1_0_0","to":"1_0_0_6","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_7","from":"1_0_0","to":"1_0_0_7","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_8","from":"1_0_0","to":"1_0_0_8","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_9","from":"1_0_0","to":"1_0_0_9","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_10","from":"1_0_0","to":"1_0_0_10","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_11","from":"1_0_0","to":"1_0_0_11","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_12","from":"1_0_0","to":"1_0_0_12","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_13","from":"1_0_0","to":"1_0_0_13","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_14","from":"1_0_0","to":"1_0_0_14","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_0_15","from":"1_0_0","to":"1_0_0_15","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_1","from":"1_0","to":"1_0_1","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_2","from":"1_0","to":"1_0_2","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_3","from":"1_0","to":"1_0_3","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_4","from":"1_0","to":"1_0_4","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_5","from":"1_0","to":"1_0_5","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_6","from":"1_0","to":"1_0_6","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_7","from":"1_0","to":"1_0_7","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_8","from":"1_0","to":"1_0_8","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_9","from":"1_0","to":"1_0_9","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_10","from":"1_0","to":"1_0_10","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_11","from":"1_0","to":"1_0_11","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_12","from":"1_0","to":"1_0_12","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_13","from":"1_0","to":"1_0_13","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_14","from":"1_0","to":"1_0_14","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_0_15","from":"1_0","to":"1_0_15","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_1","from":1,"to":"1_1","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_2","from":1,"to":"1_2","color":{"color":"#ccc"},"hidden":false},
                {"id":"1_3","from":1,"to":"1_3","color":{"color":"#ccc"},"hidden":false}
            ]
        };
        draw(_mydata);
    });


    function draw(data){
        var  options = {
            nodes : {
                font:{
                    color: "#888",
                    size: 10
                }
            },
            edges: {
                smooth: false, // Si mostrar la flecha de dirección
                color: "#333" // color de linea
            },
            layout: {
                improvedLayout:false
            },
            interaction: {
                navigationButtons: true, // Si es verdadero, dibuje los botones de navegación en el lienzo web. Estos son botones HTML y se pueden personalizar completamente mediante CSS.
                keyboard: {
                    enabled: true,
                    speed: {
                        x: -1,
                        y: -1,
                        zoom: 0.02
                    },
                    bindToWindow: true
                } // Habilitar atajos de teclado
            },
            physics: {
                stabilization: false,
                barnesHut: {
                    centralGravity: 8, // El atractor de gravedad central atrae a toda la red hacia el centro
                    springLength: 80, // El borde se modela como un resorte. Esta longitud del resorte es la longitud restante del resorte.
                    gravitationalConstant: -80000, // Atracción por gravedad. Nos gusta el rechazo por lo que el valor es negativo. Si desea una repulsión más fuerte, disminuya el valor (por lo tanto, -10000, -50,000).
                    avoidOverlap: 0.2, // Rango aceptado: [0 .. 1]. Cuando sea mayor que 0, se considerará el tamaño del nodo. Esta distancia se calculará a partir del radio del círculo circundante de los nodos del modelo de gravedad. El valor 1 es la máxima evitación de superposición.
                    damping: 0.3,
                    springConstant: 0.5
                },
                minVelocity: 16 // Una vez que se alcanza la velocidad mínima de todos los nodos, asumimos que la red se ha estabilizado y la simulación se detiene.
            }
        };

        network = new vis.Network(container, data, options);
        nodes_data = network.body.data.nodes;
        edges_data = network.body.data.edges;

        // Procesando eventos después de que se estabiliza la animación
        var stabilizedTimer;
        network.on("stabilized", function (params) { // ¿Se llamará dos veces?
            window.clearTimeout(stabilizedTimer);
            stabilizedTimer = setTimeout(function(){
                exportNetworkPosition(network);
                options.physics.enabled = false; // Apaga el sistema físico
                network.setOptions(options);
            },200);
        });

        // botón derecho del ratón
        network.on("oncontext",function(params){});

        // Seleccionar nodo
        network.on("selectNode", function (params) {});

        // Haga clic en el nodo
        network.on("click", function (params) {});

        // Haga doble clic en el nodo para ocultar o mostrar los nodos secundarios
        network.on("doubleClick", function (params) {
            if ( params.nodes.length != 0) { // Haga doble clic en el nodo
                var _node = params.nodes[0];
                var _nodeName = nodes_data._data[_node].name;
                var _allChild = getAllChilds(network,_node,[]);
                if(_allChild.length > 0 ){ // Hay nodos secundarios
                    if( nodes_data._data[_allChild[_allChild.length-1]].hidden == false){
                        nodes_data.update([{id:_node,label:_nodeName + "  "+connectedNum+_allChild.length}]);
                        for(var i=0;i<_allChild.length;i++){
                            nodes_data.update([{id:_allChild[i], hidden:true}]);
                            edges_data.update([{id:_allChild[i], hidden:true}]);
                        }
                    }else{
                        nodes_data.update([{id:_node, label:_nodeName}]);
                        for(var j=0;j<_allChild.length;j++){
                            nodes_data.update([{id:_allChild[j], hidden:false}]);
                            edges_data.update([{id:_allChild[j], hidden:false}]);
                        }
                    }
                }
            }
        });

        // Arrastrar nodo
        network.on("dragging", function (params) {// Evento de arrastre en progreso
            if (params.nodes.length != 0 ) {
                nodeMoveFun(params);
            }
        });

        // Después de que termine el arrastre
        network.on("dragEnd", function (params) {
            if (params.nodes.length != 0 ) {
                var arr = nodeMoveFun(params);
                exportNetworkPosition(network,arr);
            }
        });

        // zoom
        network.on("zoom", function (params) {});
    }

    /*
           * Obtener todos los nodos secundarios
           * red: objeto gráfico
           * _thisNode: el nodo en el que se hizo clic (nodo principal)
           * _Allnodes: utilizado para contener la matriz de ID de nodo secundario
     * */
    function getAllChilds(network,_thisNode,_Allnodes){
        var _nodes = network.getConnectedNodes(_thisNode,"to");
        if(_nodes.length > 0){
            for(var i=0;i<_nodes.length;i++){
                getAllChilds(network,_nodes[i],_Allnodes);
                _Allnodes.push(_nodes[i]);
            }
        }
        return _Allnodes
    };

    // movimiento de nodo
    function nodeMoveFun(params){
        var click_node_id = params.nodes[0];
        var allsubidsarr = getAllChilds(network,click_node_id,[]); // Obtener todos los nodos secundarios

        if(allsubidsarr){ // si hay nodos secundarios
            var positionThis = network.getPositions(click_node_id);
            var clickNodePosition = positionThis[click_node_id]; // Registra la posición del nodo que se arrastra después de arrastrar
            var position = JSON.parse(localStorage.getItem("position"));
            var startNodeX,startNodeY; // Registra el nodo hijo del nodo que se arrastra, la posición antes de arrastrar
            var numNetx,numNety; // Registra la distancia relativa movida por el nodo arrastrado
            var positionObj={}; // Registrar la información de posición del nodo movido, usado para regresar

            positionObj[click_node_id] =  {x:clickNodePosition.x, y:clickNodePosition.y}; // Registra la información de posición del nodo arrastrado
            numNetx = clickNodePosition.x - position[click_node_id].x; // Distancia de arrastre
            numNety = clickNodePosition.y - position[click_node_id].y;

            for(var j =0;j<allsubidsarr.length;j++){
                if(position[allsubidsarr[j]]) {
                    startNodeX = position[allsubidsarr[j]].x; // donde comienza el nodo hijo
                    startNodeY = position[allsubidsarr[j]].y;
                    network.moveNode(allsubidsarr[j], (startNodeX + numNetx), (startNodeY + numNety)); // Mover los nodos secundarios en la vista
                    positionObj[allsubidsarr[j]] =  {x:(startNodeX + numNetx), y:(startNodeY + numNety)}; // Registra la información de ubicación de los nodos secundarios
                }
            }
        }
        return positionObj;
    };

    /*
           * Configuración de ubicación de nodo
           * red: objeto gráfico
           * arr: la información de ubicación del nodo de este movimiento
     * */
    function exportNetworkPosition(network,arr){
        if(arr){ // Después del plegado, la información de posición obtenida por getPositions () no contiene información de posición de nodo oculta. En este momento, todas las posiciones de nodo almacenadas la última vez son llamadas y la posición de nodo de este movimiento se modifica y finalmente se guarda
            var localtionPosition = JSON.parse(localStorage.getItem("position"));
            for(let index in arr ){
                localtionPosition[index] = {
                    x:arr[index].x,
                    y:arr[index].y
                }
            }
            setLocal(localtionPosition);

        }else{
            var position = network.getPositions();
            setLocal(position);
        }
    };
    // Procesar el almacenamiento local, aquí solo se puede usar como un navegador avanzado y no se puede procesar por debajo de ie9
    function setLocal(position) {
        localStorage.removeItem("position");
        localStorage.setItem("position",JSON.stringify(position));
    }
</script>
</html>